AC_INIT(src/main.c)
AM_INIT_AUTOMAKE(xfwm4, 0.0.100)

AM_CONFIG_HEADER(config.h)
AC_PROG_CC
AC_PROG_INSTALL

AC_C_INLINE
AC_C_CONST

AC_PATH_XTRA
AC_HEADER_STDC
AC_CHECK_HEADERS(stdlib.h string.h unistd.h)

AC_CHECK_LIB(X11, main,, AC_MSG_ERROR([libX11 is missing from your system: Make sure you have both the  X Window System libraries and development headers correctly installed]), $X_CFLAGS $X_PRE_LIBS $X_EXTRA_LIBS $X_LIBS)
AC_CHECK_LIB(Xext, main,, AC_MSG_ERROR([The X Window System installed on this machine does not support the shape extension]), $X_CFLAGS $X_PRE_LIBS $X_EXTRA_LIBS $X_LIBS)
AC_CHECK_LIB(Xpm, main,, AC_MSG_ERROR([libXpm is missing from your system: Make sure you have both the Xpm libraries and development headers correctly installed]), $X_CFLAGS $X_PRE_LIBS $X_EXTRA_LIBS $X_LIBS)

AC_CHECK_FUNCS(malloc setlocale strchr strdup strrchr strstr)

AC_ARG_ENABLE(debug, [  --enable-debug  	use this option if you want to debug xfwm4], [ AC_DEFINE(DEBUG, 1) ],)

## Versions of dependencies
GLIB_REQUIRED_VERSION=2.0.0
GTK_REQUIRED_VERSION=2.0.0
PANGO_REQUIRED_VERSION=1.0.0

PKG_CHECK_MODULES(BASE_DEPENDENCIES, glib-2.0 >= $GLIB_REQUIRED_VERSION gtk+-2.0 >= $GTK_REQUIRED_VERSION pango >= $PANGO_REQUIRED_VERSION)

AC_OUTPUT(Makefile)
AC_OUTPUT(src/Makefile)
AC_OUTPUT(defaults/defaults)
AC_OUTPUT(defaults/Makefile)
AC_OUTPUT(themes/Makefile)
AC_OUTPUT(themes/cruxish/Makefile)
AC_OUTPUT(themes/next/Makefile)
AC_OUTPUT(themes/oroborus/Makefile)
AC_OUTPUT(themes/platinum/Makefile)
AC_OUTPUT(themes/slimline/Makefile)
AC_OUTPUT(themes/windows/Makefile)
AC_OUTPUT(themes/coldsteel/Makefile)
AC_OUTPUT(themes/agua/Makefile)
AC_OUTPUT(themes/redmond/Makefile)
AC_OUTPUT(themes/gtk/Makefile)
AC_OUTPUT(themes/xfce/Makefile)
AC_OUTPUT(themes/mofit/Makefile)
AC_OUTPUT(themes/trench/Makefile)
AC_OUTPUT(themes/linea/Makefile)
